

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>camera_alignment_core.alignment_utils package &mdash; camera-alignment-core 0.1.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="camera_alignment_core.bin package" href="camera_alignment_core.bin.html" />
    <link rel="prev" title="camera_alignment_core package" href="camera_alignment_core.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> camera-alignment-core
          

          
          </a>

          
            
            
              <div class="version">
                0.1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#stable-release">Stable release</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#from-sources">From sources</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">Package modules</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="camera_alignment_core.html">camera_alignment_core package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="camera_alignment_core.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">camera_alignment_core.alignment_utils package</a></li>
<li class="toctree-l4"><a class="reference internal" href="camera_alignment_core.bin.html">camera_alignment_core.bin package</a></li>
<li class="toctree-l4"><a class="reference internal" href="camera_alignment_core.exception.html">camera_alignment_core.exception package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="camera_alignment_core.html#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="camera_alignment_core.html#module-camera_alignment_core.alignment_core">camera_alignment_core.alignment_core module</a></li>
<li class="toctree-l3"><a class="reference internal" href="camera_alignment_core.html#module-camera_alignment_core.channel_info">camera_alignment_core.channel_info module</a></li>
<li class="toctree-l3"><a class="reference internal" href="camera_alignment_core.html#module-camera_alignment_core.constants">camera_alignment_core.constants module</a></li>
<li class="toctree-l3"><a class="reference internal" href="camera_alignment_core.html#module-camera_alignment_core">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#get-started">Get Started!</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#deploying">Deploying</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">camera-alignment-core</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="modules.html">camera_alignment_core</a> &raquo;</li>
        
          <li><a href="camera_alignment_core.html">camera_alignment_core package</a> &raquo;</li>
        
      <li>camera_alignment_core.alignment_utils package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/camera_alignment_core.alignment_utils.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="camera_alignment_core.bin.html" class="btn btn-neutral float-right" title="camera_alignment_core.bin package" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
      
      
        <a href="camera_alignment_core.html" class="btn btn-neutral float-left" title="camera_alignment_core package" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="camera-alignment-core-alignment-utils-package">
<h1>camera_alignment_core.alignment_utils package<a class="headerlink" href="#camera-alignment-core-alignment-utils-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-camera_alignment_core.alignment_utils.alignment_info">
<span id="camera-alignment-core-alignment-utils-alignment-info-module"></span><h2>camera_alignment_core.alignment_utils.alignment_info module<a class="headerlink" href="#module-camera_alignment_core.alignment_utils.alignment_info" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.alignment_info.AlignmentInfo">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">camera_alignment_core.alignment_utils.alignment_info.</span></span><span class="sig-name descname"><span class="pre">AlignmentInfo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rotation</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shift_x</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shift_y</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">z_offset</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scaling</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tform</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">skimage.transform._geometric.SimilarityTransform</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/alignment_info.html#AlignmentInfo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.alignment_info.AlignmentInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>These are metrics captured/measured as part of generating the alignment matrix.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.alignment_info.AlignmentInfo.rotation">
<span class="sig-name descname"><span class="pre">rotation</span></span><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#camera_alignment_core.alignment_utils.alignment_info.AlignmentInfo.rotation" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.alignment_info.AlignmentInfo.scaling">
<span class="sig-name descname"><span class="pre">scaling</span></span><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#camera_alignment_core.alignment_utils.alignment_info.AlignmentInfo.scaling" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.alignment_info.AlignmentInfo.shift_x">
<span class="sig-name descname"><span class="pre">shift_x</span></span><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#camera_alignment_core.alignment_utils.alignment_info.AlignmentInfo.shift_x" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.alignment_info.AlignmentInfo.shift_y">
<span class="sig-name descname"><span class="pre">shift_y</span></span><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#camera_alignment_core.alignment_utils.alignment_info.AlignmentInfo.shift_y" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.alignment_info.AlignmentInfo.tform">
<span class="sig-name descname"><span class="pre">tform</span></span><em class="property"><span class="pre">:</span> <span class="pre">skimage.transform._geometric.SimilarityTransform</span></em><a class="headerlink" href="#camera_alignment_core.alignment_utils.alignment_info.AlignmentInfo.tform" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.alignment_info.AlignmentInfo.z_offset">
<span class="sig-name descname"><span class="pre">z_offset</span></span><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#camera_alignment_core.alignment_utils.alignment_info.AlignmentInfo.z_offset" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-camera_alignment_core.alignment_utils.crop_rings">
<span id="camera-alignment-core-alignment-utils-crop-rings-module"></span><h2>camera_alignment_core.alignment_utils.crop_rings module<a class="headerlink" href="#module-camera_alignment_core.alignment_utils.crop_rings" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.crop_rings.CropRings">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">camera_alignment_core.alignment_utils.crop_rings.</span></span><span class="sig-name descname"><span class="pre">CropRings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pixel_size</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">magnification</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_px_size</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bead_distance</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">15</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/crop_rings.html#CropRings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.crop_rings.CropRings" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.crop_rings.CropRings.get_crop_dimensions">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">get_crop_dimensions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img_height</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">img_width</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cross_y</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cross_x</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bead_dist_px</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">crop_param</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0.5</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/crop_rings.html#CropRings.get_crop_dimensions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.crop_rings.CropRings.get_crop_dimensions" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the crop dimension from the location of the cross to capture complete rings in the image
:Parameters: * <strong>img</strong> (<em>mxn nd-array image of rings</em>)</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>cross_y</strong> (<em>y location of center cross</em>)</p></li>
<li><p><strong>cross_x</strong> (<em>x location of center cross</em>)</p></li>
<li><p><strong>bead_dist_px</strong> (<em>distance between rings in pixels</em>)</p></li>
<li><p><strong>crop_param</strong> (<em>a float between 0 and 1 that indicates a factor of distance between rings that should be left behind</em>) – after cropping</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><strong>crop_top</strong> (<em>top pixels to keep</em>)</p></li>
<li><p><strong>crop_bottom</strong> (<em>bottom pixels to keep</em>)</p></li>
<li><p><strong>crop_left</strong> (<em>left pixels to keep</em>)</p></li>
<li><p><strong>crop_right</strong> (<em>right pixels to keep</em>)</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.crop_rings.CropRings.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">min_no_crop_magnification</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">63</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">segmentation_mult_factor</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">2.5</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/crop_rings.html#CropRings.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.crop_rings.CropRings.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Crop image closer to ring grid
:min_no_crop_magnification: int</p>
<blockquote>
<div><p>Minimum magnification at which we do not need to crop the bead image (e.g., because it’s zoomed enough)</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Segmentation_mult_factor</dt>
<dd class="field-odd"><p>float
Value passed directly to SegmentRings::segment_cross as <cite>input_mult_factor</cite></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-camera_alignment_core.alignment_utils.get_center_z">
<span id="camera-alignment-core-alignment-utils-get-center-z-module"></span><h2>camera_alignment_core.alignment_utils.get_center_z module<a class="headerlink" href="#module-camera_alignment_core.alignment_utils.get_center_z" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.get_center_z.get_center_z">
<span class="sig-prename descclassname"><span class="pre">camera_alignment_core.alignment_utils.get_center_z.</span></span><span class="sig-name descname"><span class="pre">get_center_z</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img_stack</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0.2,</span> <span class="pre">99.8)</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/get_center_z.html#get_center_z"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.get_center_z.get_center_z" title="Permalink to this definition">¶</a></dt>
<dd><p>Get index of center z slice by finding the slice with max. contrast value
:Parameters: <strong>stack           a 3D (or 2D) image</strong></p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>center_z        index of center z-slice</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-camera_alignment_core.alignment_utils.ring_alignment">
<span id="camera-alignment-core-alignment-utils-ring-alignment-module"></span><h2>camera_alignment_core.alignment_utils.ring_alignment module<a class="headerlink" href="#module-camera_alignment_core.alignment_utils.ring_alignment" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.ring_alignment.RingAlignment">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">camera_alignment_core.alignment_utils.ring_alignment.</span></span><span class="sig-name descname"><span class="pre">RingAlignment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ref_seg_rings</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_label_rings</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_rings_props</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_cross_label</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mov_seg_rings</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mov_label_rings</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mov_rings_props</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mov_cross_label</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/ring_alignment.html#RingAlignment"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.ring_alignment.RingAlignment" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.ring_alignment.RingAlignment.assign_ref_to_mov">
<span class="sig-name descname"><span class="pre">assign_ref_to_mov</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">updated_ref_peak_dict</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">updated_mov_peak_dict</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/ring_alignment.html#RingAlignment.assign_ref_to_mov"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.ring_alignment.RingAlignment.assign_ref_to_mov" title="Permalink to this definition">¶</a></dt>
<dd><p>Assigns beads from moving image to reference image using
linear_sum_assignment to reduce the distance between the same bead on
the separate channels. In case where there is more beads in one channel
than the other, this method will throw off the extra bead that cannot
be assigned to one, single bead on the other image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>updated_ref_peak_dict</strong> – A dictionary
({bead_number: (coor_y, coor_x)}) from reference beads</p></li>
<li><p><strong>updated_mov_peak_dict</strong> – A dictionary
({bead_number: (coor_y, coor_x)}) from moving beads</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ref_mov_coor_dict: A dictionary mapping the reference bead coordinates and moving bead coordinates</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.ring_alignment.RingAlignment.change_coor_system">
<span class="sig-name descname"><span class="pre">change_coor_system</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">coor_dict</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/ring_alignment.html#RingAlignment.change_coor_system"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.ring_alignment.RingAlignment.change_coor_system" title="Permalink to this definition">¶</a></dt>
<dd><p>Changes coordinates in a dictionary from {(y1, x1):(y2, x2)} to {(x1, y1): (x2, y2)}
:param coor_dict: A dictionary of coordinates in the form of {(y1, x1):(y2, x2)}
:return:</p>
<blockquote>
<div><p>An updated reversed coordinate dictionary that is {(x1, y1): (x2, y2)}</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.ring_alignment.RingAlignment.report_similarity_matrix_parameters">
<span class="sig-name descname"><span class="pre">report_similarity_matrix_parameters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tform</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">skimage.transform._geometric.SimilarityTransform</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#camera_alignment_core.alignment_utils.alignment_info.AlignmentInfo" title="camera_alignment_core.alignment_utils.alignment_info.AlignmentInfo"><span class="pre">camera_alignment_core.alignment_utils.alignment_info.AlignmentInfo</span></a></span></span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/ring_alignment.html#RingAlignment.report_similarity_matrix_parameters"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.ring_alignment.RingAlignment.report_similarity_matrix_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Reports similarity matrix and its parameters
:param tform: A transform generated from skimage.transform.estimate_transform
:param method_logging: A boolean to indicate if printing/logging statements is selected
:return: A dictionary with the following keys and values:</p>
<blockquote>
<div><p>transform: A transform to be applied to moving images
scaling: Uniform scaling parameter
shift_y: Shift in y
shift_x: Shift in x
rotate_angle: Rotation angle</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.ring_alignment.RingAlignment.rings_coor_dict">
<span class="sig-name descname"><span class="pre">rings_coor_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">props</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cross_label</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/ring_alignment.html#RingAlignment.rings_coor_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.ring_alignment.RingAlignment.rings_coor_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a dictionary from regionprops_table in the form of {label: (coor_y, coor_x)} for rings image
:param props: a dataframe containing regionprops_table output
:param cross_label: Integer value representing where the center cross is in the rings image
:return:</p>
<blockquote>
<div><p>img_dict: A dictionary of label to coordinates</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.ring_alignment.RingAlignment.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">skimage.transform._geometric.SimilarityTransform</span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="#camera_alignment_core.alignment_utils.alignment_info.AlignmentInfo" title="camera_alignment_core.alignment_utils.alignment_info.AlignmentInfo"><span class="pre">camera_alignment_core.alignment_utils.alignment_info.AlignmentInfo</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/ring_alignment.html#RingAlignment.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.ring_alignment.RingAlignment.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-camera_alignment_core.alignment_utils.segment_rings">
<span id="camera-alignment-core-alignment-utils-segment-rings-module"></span><h2>camera_alignment_core.alignment_utils.segment_rings module<a class="headerlink" href="#module-camera_alignment_core.alignment_utils.segment_rings" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.segment_rings.SegmentRings">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">camera_alignment_core.alignment_utils.segment_rings.</span></span><span class="sig-name descname"><span class="pre">SegmentRings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pixel_size</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">magnification</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thresh</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bead_distance_um</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cross_size_um</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">4.4999999999999996e-05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ring_radius_um</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">7e-07</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/segment_rings.html#SegmentRings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.segment_rings.SegmentRings" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.segment_rings.SegmentRings.dot_2d_slice_by_slice_wrapper">
<span class="sig-name descname"><span class="pre">dot_2d_slice_by_slice_wrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">struct_img</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s2_param</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">List</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.bool_</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/segment_rings.html#SegmentRings.dot_2d_slice_by_slice_wrapper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.segment_rings.SegmentRings.dot_2d_slice_by_slice_wrapper" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference external" href="https://github.com/AllenCell/aics-segmentation/blob/main/aicssegmentation/core/seg_dot.py">https://github.com/AllenCell/aics-segmentation/blob/main/aicssegmentation/core/seg_dot.py</a>
wrapper for 2D spot filter on 3D image slice by slice
Parameters:
————
struct_img: np.typing.NDArray</p>
<blockquote>
<div><p>a 3d numpy array, usually the image after smoothing</p>
</div></blockquote>
<dl class="simple">
<dt>s2_param: List</dt><dd><p>[[scale_1, cutoff_1], [scale_2, cutoff_2], ….], e.g. [[1, 0.1]]
or [[1, 0.12], [3,0.1]]: scale_x is set based on the estimated radius
of your target dots. For example, if visually the diameter of the
dots is usually 3~4 pixels, then you may want to set scale_x as 1
or something near 1 (like 1.25). Multiple scales can be used, if
you have dots of very different sizes. cutoff_x is a threshold
applied on the actual filter reponse to get the binary result.
Smaller cutoff_x may yielf more dots and fatter segmentation,
while larger cutoff_x could be less permisive and yield less
dots and slimmer segmentation.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.segment_rings.SegmentRings.filter_center_cross">
<span class="sig-name descname"><span class="pre">filter_center_cross</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">label_seg</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">pandas.core.frame.DataFrame</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/segment_rings.html#SegmentRings.filter_center_cross"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.segment_rings.SegmentRings.filter_center_cross" title="Permalink to this definition">¶</a></dt>
<dd><p>filters out where the center cross (the biggest segmented object) is in a labelled rings image</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>label_seg</strong> (<em>A labelled image</em>)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>filter_label</strong> (<em>A labelled image after filtering the center cross (center cross = 0)</em>)</p></li>
<li><p><strong>props_df</strong> (<em>A dataframe from regionprops_table with columns [‘label’, ‘centroid-0’, ‘centroid-y’, ‘area’]</em>)</p></li>
<li><p><strong>cross_label</strong> (<em>The integer label of center cross</em>)</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.segment_rings.SegmentRings.get_number_rings">
<span class="sig-name descname"><span class="pre">get_number_rings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mult_factor</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/segment_rings.html#SegmentRings.get_number_rings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.segment_rings.SegmentRings.get_number_rings" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimates the number of rings in a rings object using the location of the center cross
:Parameters: * <strong>img</strong> (<em>input image (after smoothing)</em>)</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>bead_dist_px</strong> (<em>calculated distance between rings in pixels</em>)</p></li>
<li><p><strong>mult_factor</strong> (<em>parameter to segment cross with</em>)</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>num_beads</strong></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>number of beads after estimation</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.segment_rings.SegmentRings.preprocess_img">
<span class="sig-name descname"><span class="pre">preprocess_img</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/segment_rings.html#SegmentRings.preprocess_img"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.segment_rings.SegmentRings.preprocess_img" title="Permalink to this definition">¶</a></dt>
<dd><p>Pre-process image with raw-intensity with rescaling and smoothing using pre-defined parameters from image
magnification information
:returns: <strong>smooth</strong>
:rtype: smooth image</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.segment_rings.SegmentRings.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">pandas.core.frame.DataFrame</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/segment_rings.html#SegmentRings.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.segment_rings.SegmentRings.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.segment_rings.SegmentRings.segment_cross">
<span class="sig-name descname"><span class="pre">segment_cross</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mult_factor_range</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">(1,</span> <span class="pre">5)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_mult_factor</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.bool_</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">pandas.core.frame.DataFrame</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/segment_rings.html#SegmentRings.segment_cross"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.segment_rings.SegmentRings.segment_cross" title="Permalink to this definition">¶</a></dt>
<dd><p>Segments the center cross in the image through iterating the intensity-threshold parameter until one object
greater than the expected cross size (in pixel) is segmented
:Parameters: * <strong>img</strong> (<em>image (intensity after smoothing)</em>)</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>mult_factor_range</strong> (<em>range of multiplication factor to determine threshold for segmentation</em>)</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><strong>seg_cross</strong> (<em>binary image of segmented cross</em>)</p></li>
<li><p><strong>props</strong> (<em>dataframe describing the centroid location and size of the segmented cross</em>)</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.segment_rings.SegmentRings.segment_rings_dot_filter">
<span class="sig-name descname"><span class="pre">segment_rings_dot_filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img_2d</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seg_cross</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.bool_</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_beads</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minArea</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">search_range</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">(0,</span> <span class="pre">0.75)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size_param</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">2.5</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/segment_rings.html#SegmentRings.segment_rings_dot_filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.segment_rings.SegmentRings.segment_rings_dot_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Segments rings using 2D dot filter from aics-segmenter. The method loops through a possible range of parameters
and automatically detects the optimal filter parameter when it segments the number of expected rings objects
:Parameters: * <strong>img</strong> (<em>rings image (after smoothing)</em>)</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>seg_cross</strong> (<em>binary mask of the center cross object</em>)</p></li>
<li><p><strong>num_beads</strong> (<em>expected number of beads</em>)</p></li>
<li><p><strong>minArea</strong> (<em>minimum area of rings, any segmented object below this size will be filtered out</em>)</p></li>
<li><p><strong>search_range</strong> (<em>initial search range of filter parameter</em>)</p></li>
<li><p><strong>size_param</strong> (<em>size parameter of dot filter</em>)</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><strong>seg</strong> (<em>binary mask of ring segmentation</em>)</p></li>
<li><p><strong>label</strong> (<em>labelled mask of ring segmentation</em>)</p></li>
<li><p><strong>thresh</strong> (<em>filter parameter after optimization</em>)</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.segment_rings.SegmentRings.segment_rings_intensity_threshold">
<span class="sig-name descname"><span class="pre">segment_rings_intensity_threshold</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_px_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mult_factor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2.5</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/segment_rings.html#SegmentRings.segment_rings_intensity_threshold"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.segment_rings.SegmentRings.segment_rings_intensity_threshold" title="Permalink to this definition">¶</a></dt>
<dd><p>Segments rings using intensity-thresholded method
:Parameters: * <strong>img</strong> (<em>rings image (after smoothing)</em>)</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>filter_px_size</strong> (<em>any segmented below this size will be filtered out</em>)</p></li>
<li><p><strong>mult_factor</strong> (<em>parameter to adjust threshold</em>)</p></li>
<li><p><strong>show_seg</strong> (<em>boolean to display segmentation</em>)</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><strong>filtered_seg</strong> (<em>binary mask of ring segmentation</em>)</p></li>
<li><p><strong>filtered_label</strong> (<em>labelled mask of ring segmentation</em>)</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-camera_alignment_core.alignment_utils">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-camera_alignment_core.alignment_utils" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.AlignmentInfo">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">camera_alignment_core.alignment_utils.</span></span><span class="sig-name descname"><span class="pre">AlignmentInfo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rotation</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shift_x</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shift_y</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">z_offset</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scaling</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tform</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">skimage.transform._geometric.SimilarityTransform</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/alignment_info.html#AlignmentInfo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.AlignmentInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>These are metrics captured/measured as part of generating the alignment matrix.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.AlignmentInfo.rotation">
<span class="sig-name descname"><span class="pre">rotation</span></span><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#camera_alignment_core.alignment_utils.AlignmentInfo.rotation" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.AlignmentInfo.scaling">
<span class="sig-name descname"><span class="pre">scaling</span></span><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#camera_alignment_core.alignment_utils.AlignmentInfo.scaling" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.AlignmentInfo.shift_x">
<span class="sig-name descname"><span class="pre">shift_x</span></span><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#camera_alignment_core.alignment_utils.AlignmentInfo.shift_x" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.AlignmentInfo.shift_y">
<span class="sig-name descname"><span class="pre">shift_y</span></span><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#camera_alignment_core.alignment_utils.AlignmentInfo.shift_y" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.AlignmentInfo.tform">
<span class="sig-name descname"><span class="pre">tform</span></span><em class="property"><span class="pre">:</span> <span class="pre">skimage.transform._geometric.SimilarityTransform</span></em><a class="headerlink" href="#camera_alignment_core.alignment_utils.AlignmentInfo.tform" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.AlignmentInfo.z_offset">
<span class="sig-name descname"><span class="pre">z_offset</span></span><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#camera_alignment_core.alignment_utils.AlignmentInfo.z_offset" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.CropRings">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">camera_alignment_core.alignment_utils.</span></span><span class="sig-name descname"><span class="pre">CropRings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pixel_size</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">magnification</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_px_size</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bead_distance</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">15</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/crop_rings.html#CropRings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.CropRings" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.CropRings.get_crop_dimensions">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">get_crop_dimensions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img_height</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">img_width</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cross_y</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cross_x</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bead_dist_px</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">crop_param</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0.5</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/crop_rings.html#CropRings.get_crop_dimensions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.CropRings.get_crop_dimensions" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the crop dimension from the location of the cross to capture complete rings in the image
:Parameters: * <strong>img</strong> (<em>mxn nd-array image of rings</em>)</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>cross_y</strong> (<em>y location of center cross</em>)</p></li>
<li><p><strong>cross_x</strong> (<em>x location of center cross</em>)</p></li>
<li><p><strong>bead_dist_px</strong> (<em>distance between rings in pixels</em>)</p></li>
<li><p><strong>crop_param</strong> (<em>a float between 0 and 1 that indicates a factor of distance between rings that should be left behind</em>) – after cropping</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><strong>crop_top</strong> (<em>top pixels to keep</em>)</p></li>
<li><p><strong>crop_bottom</strong> (<em>bottom pixels to keep</em>)</p></li>
<li><p><strong>crop_left</strong> (<em>left pixels to keep</em>)</p></li>
<li><p><strong>crop_right</strong> (<em>right pixels to keep</em>)</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.CropRings.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">min_no_crop_magnification</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">63</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">segmentation_mult_factor</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">2.5</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/crop_rings.html#CropRings.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.CropRings.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Crop image closer to ring grid
:min_no_crop_magnification: int</p>
<blockquote>
<div><p>Minimum magnification at which we do not need to crop the bead image (e.g., because it’s zoomed enough)</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Segmentation_mult_factor</dt>
<dd class="field-odd"><p>float
Value passed directly to SegmentRings::segment_cross as <cite>input_mult_factor</cite></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.RingAlignment">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">camera_alignment_core.alignment_utils.</span></span><span class="sig-name descname"><span class="pre">RingAlignment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ref_seg_rings</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_label_rings</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_rings_props</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_cross_label</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mov_seg_rings</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mov_label_rings</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mov_rings_props</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mov_cross_label</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/ring_alignment.html#RingAlignment"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.RingAlignment" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.RingAlignment.assign_ref_to_mov">
<span class="sig-name descname"><span class="pre">assign_ref_to_mov</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">updated_ref_peak_dict</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">updated_mov_peak_dict</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/ring_alignment.html#RingAlignment.assign_ref_to_mov"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.RingAlignment.assign_ref_to_mov" title="Permalink to this definition">¶</a></dt>
<dd><p>Assigns beads from moving image to reference image using
linear_sum_assignment to reduce the distance between the same bead on
the separate channels. In case where there is more beads in one channel
than the other, this method will throw off the extra bead that cannot
be assigned to one, single bead on the other image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>updated_ref_peak_dict</strong> – A dictionary
({bead_number: (coor_y, coor_x)}) from reference beads</p></li>
<li><p><strong>updated_mov_peak_dict</strong> – A dictionary
({bead_number: (coor_y, coor_x)}) from moving beads</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ref_mov_coor_dict: A dictionary mapping the reference bead coordinates and moving bead coordinates</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.RingAlignment.change_coor_system">
<span class="sig-name descname"><span class="pre">change_coor_system</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">coor_dict</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/ring_alignment.html#RingAlignment.change_coor_system"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.RingAlignment.change_coor_system" title="Permalink to this definition">¶</a></dt>
<dd><p>Changes coordinates in a dictionary from {(y1, x1):(y2, x2)} to {(x1, y1): (x2, y2)}
:param coor_dict: A dictionary of coordinates in the form of {(y1, x1):(y2, x2)}
:return:</p>
<blockquote>
<div><p>An updated reversed coordinate dictionary that is {(x1, y1): (x2, y2)}</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.RingAlignment.report_similarity_matrix_parameters">
<span class="sig-name descname"><span class="pre">report_similarity_matrix_parameters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tform</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">skimage.transform._geometric.SimilarityTransform</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#camera_alignment_core.alignment_utils.alignment_info.AlignmentInfo" title="camera_alignment_core.alignment_utils.alignment_info.AlignmentInfo"><span class="pre">camera_alignment_core.alignment_utils.alignment_info.AlignmentInfo</span></a></span></span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/ring_alignment.html#RingAlignment.report_similarity_matrix_parameters"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.RingAlignment.report_similarity_matrix_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Reports similarity matrix and its parameters
:param tform: A transform generated from skimage.transform.estimate_transform
:param method_logging: A boolean to indicate if printing/logging statements is selected
:return: A dictionary with the following keys and values:</p>
<blockquote>
<div><p>transform: A transform to be applied to moving images
scaling: Uniform scaling parameter
shift_y: Shift in y
shift_x: Shift in x
rotate_angle: Rotation angle</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.RingAlignment.rings_coor_dict">
<span class="sig-name descname"><span class="pre">rings_coor_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">props</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cross_label</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/ring_alignment.html#RingAlignment.rings_coor_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.RingAlignment.rings_coor_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a dictionary from regionprops_table in the form of {label: (coor_y, coor_x)} for rings image
:param props: a dataframe containing regionprops_table output
:param cross_label: Integer value representing where the center cross is in the rings image
:return:</p>
<blockquote>
<div><p>img_dict: A dictionary of label to coordinates</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.RingAlignment.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">skimage.transform._geometric.SimilarityTransform</span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="#camera_alignment_core.alignment_utils.alignment_info.AlignmentInfo" title="camera_alignment_core.alignment_utils.alignment_info.AlignmentInfo"><span class="pre">camera_alignment_core.alignment_utils.alignment_info.AlignmentInfo</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/ring_alignment.html#RingAlignment.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.RingAlignment.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.SegmentRings">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">camera_alignment_core.alignment_utils.</span></span><span class="sig-name descname"><span class="pre">SegmentRings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pixel_size</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">magnification</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thresh</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bead_distance_um</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cross_size_um</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">4.4999999999999996e-05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ring_radius_um</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">7e-07</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/segment_rings.html#SegmentRings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.SegmentRings" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.SegmentRings.dot_2d_slice_by_slice_wrapper">
<span class="sig-name descname"><span class="pre">dot_2d_slice_by_slice_wrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">struct_img</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s2_param</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">List</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.bool_</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/segment_rings.html#SegmentRings.dot_2d_slice_by_slice_wrapper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.SegmentRings.dot_2d_slice_by_slice_wrapper" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference external" href="https://github.com/AllenCell/aics-segmentation/blob/main/aicssegmentation/core/seg_dot.py">https://github.com/AllenCell/aics-segmentation/blob/main/aicssegmentation/core/seg_dot.py</a>
wrapper for 2D spot filter on 3D image slice by slice
Parameters:
————
struct_img: np.typing.NDArray</p>
<blockquote>
<div><p>a 3d numpy array, usually the image after smoothing</p>
</div></blockquote>
<dl class="simple">
<dt>s2_param: List</dt><dd><p>[[scale_1, cutoff_1], [scale_2, cutoff_2], ….], e.g. [[1, 0.1]]
or [[1, 0.12], [3,0.1]]: scale_x is set based on the estimated radius
of your target dots. For example, if visually the diameter of the
dots is usually 3~4 pixels, then you may want to set scale_x as 1
or something near 1 (like 1.25). Multiple scales can be used, if
you have dots of very different sizes. cutoff_x is a threshold
applied on the actual filter reponse to get the binary result.
Smaller cutoff_x may yielf more dots and fatter segmentation,
while larger cutoff_x could be less permisive and yield less
dots and slimmer segmentation.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.SegmentRings.filter_center_cross">
<span class="sig-name descname"><span class="pre">filter_center_cross</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">label_seg</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">pandas.core.frame.DataFrame</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/segment_rings.html#SegmentRings.filter_center_cross"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.SegmentRings.filter_center_cross" title="Permalink to this definition">¶</a></dt>
<dd><p>filters out where the center cross (the biggest segmented object) is in a labelled rings image</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>label_seg</strong> (<em>A labelled image</em>)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>filter_label</strong> (<em>A labelled image after filtering the center cross (center cross = 0)</em>)</p></li>
<li><p><strong>props_df</strong> (<em>A dataframe from regionprops_table with columns [‘label’, ‘centroid-0’, ‘centroid-y’, ‘area’]</em>)</p></li>
<li><p><strong>cross_label</strong> (<em>The integer label of center cross</em>)</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.SegmentRings.get_number_rings">
<span class="sig-name descname"><span class="pre">get_number_rings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mult_factor</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/segment_rings.html#SegmentRings.get_number_rings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.SegmentRings.get_number_rings" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimates the number of rings in a rings object using the location of the center cross
:Parameters: * <strong>img</strong> (<em>input image (after smoothing)</em>)</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>bead_dist_px</strong> (<em>calculated distance between rings in pixels</em>)</p></li>
<li><p><strong>mult_factor</strong> (<em>parameter to segment cross with</em>)</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>num_beads</strong></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>number of beads after estimation</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.SegmentRings.preprocess_img">
<span class="sig-name descname"><span class="pre">preprocess_img</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/segment_rings.html#SegmentRings.preprocess_img"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.SegmentRings.preprocess_img" title="Permalink to this definition">¶</a></dt>
<dd><p>Pre-process image with raw-intensity with rescaling and smoothing using pre-defined parameters from image
magnification information
:returns: <strong>smooth</strong>
:rtype: smooth image</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.SegmentRings.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">pandas.core.frame.DataFrame</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/segment_rings.html#SegmentRings.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.SegmentRings.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.SegmentRings.segment_cross">
<span class="sig-name descname"><span class="pre">segment_cross</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mult_factor_range</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">(1,</span> <span class="pre">5)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_mult_factor</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.bool_</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">pandas.core.frame.DataFrame</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/segment_rings.html#SegmentRings.segment_cross"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.SegmentRings.segment_cross" title="Permalink to this definition">¶</a></dt>
<dd><p>Segments the center cross in the image through iterating the intensity-threshold parameter until one object
greater than the expected cross size (in pixel) is segmented
:Parameters: * <strong>img</strong> (<em>image (intensity after smoothing)</em>)</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>mult_factor_range</strong> (<em>range of multiplication factor to determine threshold for segmentation</em>)</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><strong>seg_cross</strong> (<em>binary image of segmented cross</em>)</p></li>
<li><p><strong>props</strong> (<em>dataframe describing the centroid location and size of the segmented cross</em>)</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.SegmentRings.segment_rings_dot_filter">
<span class="sig-name descname"><span class="pre">segment_rings_dot_filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img_2d</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seg_cross</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.bool_</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_beads</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minArea</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">search_range</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">(0,</span> <span class="pre">0.75)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size_param</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">2.5</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/segment_rings.html#SegmentRings.segment_rings_dot_filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.SegmentRings.segment_rings_dot_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Segments rings using 2D dot filter from aics-segmenter. The method loops through a possible range of parameters
and automatically detects the optimal filter parameter when it segments the number of expected rings objects
:Parameters: * <strong>img</strong> (<em>rings image (after smoothing)</em>)</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>seg_cross</strong> (<em>binary mask of the center cross object</em>)</p></li>
<li><p><strong>num_beads</strong> (<em>expected number of beads</em>)</p></li>
<li><p><strong>minArea</strong> (<em>minimum area of rings, any segmented object below this size will be filtered out</em>)</p></li>
<li><p><strong>search_range</strong> (<em>initial search range of filter parameter</em>)</p></li>
<li><p><strong>size_param</strong> (<em>size parameter of dot filter</em>)</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><strong>seg</strong> (<em>binary mask of ring segmentation</em>)</p></li>
<li><p><strong>label</strong> (<em>labelled mask of ring segmentation</em>)</p></li>
<li><p><strong>thresh</strong> (<em>filter parameter after optimization</em>)</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.SegmentRings.segment_rings_intensity_threshold">
<span class="sig-name descname"><span class="pre">segment_rings_intensity_threshold</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_px_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mult_factor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2.5</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/segment_rings.html#SegmentRings.segment_rings_intensity_threshold"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.SegmentRings.segment_rings_intensity_threshold" title="Permalink to this definition">¶</a></dt>
<dd><p>Segments rings using intensity-thresholded method
:Parameters: * <strong>img</strong> (<em>rings image (after smoothing)</em>)</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>filter_px_size</strong> (<em>any segmented below this size will be filtered out</em>)</p></li>
<li><p><strong>mult_factor</strong> (<em>parameter to adjust threshold</em>)</p></li>
<li><p><strong>show_seg</strong> (<em>boolean to display segmentation</em>)</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><strong>filtered_seg</strong> (<em>binary mask of ring segmentation</em>)</p></li>
<li><p><strong>filtered_label</strong> (<em>labelled mask of ring segmentation</em>)</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="camera_alignment_core.alignment_utils.get_center_z">
<span class="sig-prename descclassname"><span class="pre">camera_alignment_core.alignment_utils.</span></span><span class="sig-name descname"><span class="pre">get_center_z</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img_stack</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.uint16</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0.2,</span> <span class="pre">99.8)</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="reference internal" href="_modules/camera_alignment_core/alignment_utils/get_center_z.html#get_center_z"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#camera_alignment_core.alignment_utils.get_center_z" title="Permalink to this definition">¶</a></dt>
<dd><p>Get index of center z slice by finding the slice with max. contrast value
:Parameters: <strong>stack           a 3D (or 2D) image</strong></p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>center_z        index of center z-slice</p>
</dd>
</dl>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, AICS Software.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>